# Optimized Configuration for Industrial Video Processing
# Tuned for 71-minute video at 960x576, 50 FPS

# Video Input/Output
video:
  input_path: ""
  output_dir: "output"
  fps: null

# GPU Configuration
device:
  use_gpu: true
  gpu_id: 0
  fallback_to_cpu: true

# Detection Settings (YOLOv8)
detection:
  model: "yolov8x.pt"
  img_size: 1280
  conf_threshold: 0.20  # Lower threshold for better detection
  iou_threshold: 0.45
  person_class: 0
  machine_classes: [2, 3, 5, 7, 56, 57, 58, 59, 60, 61, 62, 63, 64, 65, 66, 67, 73, 74, 75, 76, 77, 78, 79]
  batch_size: 8

# Tracking Settings
tracking:
  track_thresh: 0.4  # Lower for better tracking
  track_buffer: 30
  match_thresh: 0.7  # More lenient matching
  min_box_area: 50  # Lower minimum area
  mot20: false

# Pose Estimation Settings
pose:
  model: "vitpose-b"
  conf_threshold: 0.25  # Lower threshold
  batch_size: 16
  hand_keypoints: [9, 10]
  arm_keypoints: [5, 6, 7, 8, 9, 10]

# Depth Estimation Settings
depth:
  model: "DPT_Large"
  optimize: true
  height: 384
  square: false

# Interaction Scoring
interaction:
  proximity:
    enabled: true
    max_distance: 3.0  # More lenient distance
    weight: 0.3
  
  pose:
    enabled: true
    weight: 0.25
    reaching_threshold: 0.25  # Lower threshold
    operating_threshold: 0.4  # Lower threshold
  
  motion:
    enabled: true
    weight: 0.2
    temporal_window: 15
    min_movement: 3  # Lower movement threshold
  
  hoi:
    enabled: false
    weight: 0.25
  
  idle_detection:
    enabled: true
    standing_threshold: 5.0  # More lenient
    walking_speed_max: 60.0  # More lenient

# Clip Mining
clip_mining:
  clip_duration: 10.0
  sliding_window: 5.0
  interaction_threshold: 0.4  # LOWER threshold for more clips
  min_interaction_frames: 40  # Lower requirement (4 sec at 10fps)
  nms_threshold: 0.5
  save_metadata: true
  save_visualization: false

# Logging
logging:
  level: "INFO"
  save_logs: true
  log_file: "pipeline.log"
  progress_bar: true

# Performance
performance:
  frame_skip: 2  # Process every 2nd frame for 2x speed
  max_frames: 30000  # Process first 10 minutes (30000 frames at 50fps / 2 skip = 5 min)
  num_workers: 4
